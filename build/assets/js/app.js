!function(){"use strict";function t(t,o){t.otherwise("/"),o.html5Mode({enabled:!1,requireBase:!1}),o.hashPrefix("!")}function o(){FastClick.attach(document.body)}function e(t,o,e,l,n){angular.extend(this,l("DefaultController",{$scope:t,$stateParams:o,$state:e}));var a=o.clase,r="http://dnd5.tr4ck.net/"+a;t.hechizos=n.get(r).success(function(o,e,l,n){o.sort(function(t,o){return parseFloat(t.nivel)-parseFloat(o.nivel)}),t.hechizos=o})}function l(t,o,e,l,n,a){angular.extend(this,l("DefaultController",{$scope:t,$stateParams:o,$state:e}));var r=[],c=[];try{c=a.get("spells").split(",")}catch(s){console.log("No favourite spell!")}c.forEach(function(t){if("false"!==t){console.log(t);var o="http://dnd5.tr4ck.net/spell/"+t;n.get(o).success(function(t,o,e,l){r.push(t)})}}),t.hechizos=r}function n(t,o,e,l,n,a){angular.extend(this,l("DefaultController",{$scope:t,$stateParams:o,$state:e}));var r=o.spellid,c="http://dnd5.tr4ck.net/spell/"+r;n.get(c).success(function(o,e,l,n){t.hechizo=o;var c=a.get("spells");try{c.indexOf(r)!==-1&&(t.hechizo.favorito=!0,console.log("Es favorito"),console.log(t.hechizo.favorito))}catch(s){console.log(s),console.log("No favourite spell!")}}),t.favorito=function(o){var e=[];try{e=a.get("spells").split(",")}catch(l){console.log("No favourite spell!")}if(t.hechizo.favorito===!0){var n=e.indexOf(o);e.splice(n,1),t.hechizo.favorito=!1}else e.push(o),t.hechizo.favorito=!0;a.set("spells",e)}}function a(t){return{set:function(o,e){t.localStorage[o]=e},get:function(o,e){return t.localStorage[o]||!1},setObject:function(o,e){t.localStorage[o]=JSON.stringify(e)},getObject:function(o){return void 0!=t.localStorage[o]&&JSON.parse(t.localStorage[o]||!1)},remove:function(o){t.localStorage.removeItem(o)},clear:function(){t.localStorage.clear()}}}angular.module("application",["ui.router","ngAnimate","ngSanitize","sticky","foundation","foundation.dynamicRouting","foundation.dynamicRouting.animations"]).config(t).controller("SpellsController",e).controller("DetalleController",n).controller("FavsController",l).factory("$localstorage",a).run(o),t.$inject=["$urlRouterProvider","$locationProvider"],e.$inject=["$scope","$stateParams","$state","$controller","$http"],l.$inject=["$scope","$stateParams","$state","$controller","$http","$localstorage"],n.$inject=["$scope","$stateParams","$state","$controller","$http","$localstorage"],a.$inject=["$window"]}();